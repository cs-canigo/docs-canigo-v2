<html>
    <head>
        <title>Canigó - HTTPS amb Canigó</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Canigó - HTTPS amb Canigó
                                                    </span>
				    </div>
				   

				    <h2><a name="HTTPSambCanig%C3%B3-HTTPSambCanig%C3%B3"></a>HTTPS amb Canigó</h2>

<p><em>Des de la versió 1.1 de Canigó fins la 2.1 està disponible aquesta solució, que només suporta tenir tota la aplicació desplegada sota HTTPS o sota HTTP, però no es permeten tenir parts de l'aplicació sota HTTPS i parts en HTTP. A partir de la versió 2.2 s'implementa un nova versió que permet configuracions mes completes.</em></p>

<p><b>Aquesta documentació és aplicable a les versions 1.1 fins la 2.1 de Canigó. Per veure com es configura HTTPS a partir de la versió 2.2, veieu la documentació del Servei de Seguretat.</b></p>

<p>Aquestes són les classes que han canviat per a resoldre el problema del HTTPS amb els Alteon.</p>

<p>S'ha posar un filtre web que crei un wrapper de request i de response que tinguin en compte que s´està treballant sota HTTPS.<br/>
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;filter&gt;
  &lt;filter-name&gt;Https Filter&lt;/filter-name&gt;
  &lt;filter-class&gt;
         net.opentrends.openframe.services.web.filter.HttpRequestWrapperFilter
  &lt;/filter-class&gt;
&lt;/filter&gt;

&lt;filter-mapping&gt;
  &lt;filter-name&gt;Https Filter&lt;/filter-name&gt;
  &lt;url-pattern&gt;*.<span class="code-keyword">do</span>&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</pre>
</div></div><br clear="all" /></p>

<p>Aquest filtre agafa un bean anomenat "httpsConfigBean" i comprova si aquest té a true el check de https. En aquest bean es configura també el port HTTPS que té configurat el sistema.<br/>
S'ha de definir aquest bean:<br/>
<div class="code"><div class="codeContent">
<pre class="code-java">&lt;bean id=<span class="code-quote">"httpsConfigBean"</span> class=<span class="code-quote">"net.opentrends.openframe.services.security.acegi.https.HttpsConfigBean"</span>&gt;
  &lt;property name=<span class="code-quote">"https"</span> value=<span class="code-quote">"${https.mode}"</span>/&gt;
  &lt;property name=<span class="code-quote">"port"</span> value=<span class="code-quote">"${https.port}"</span>/&gt;
&lt;/bean&gt;</pre>
</div></div><br clear="all" /></p>

<p>i definir aquestes propietats a un fitxer de properties.</p>

				    
                    			    </td>
		    </tr>
	    </table>
	  
    </body>
</html>